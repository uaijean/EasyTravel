package com.easytravel;

import java.util.Scanner;

public class CartaoCredito extends Cartao {
    private float limite;
    private int numeroParcelas;

    //construtor
    public CartaoCredito(){

    }

    public CartaoCredito(String numeroCartao, float limite, int numeroParcelas) {
        super(numeroCartao);
        this.limite = limite;
        this.numeroParcelas = numeroParcelas;
    }

    //getters e setters
    public float getLimite() {
        return limite;
    }

    public void setLimite(float limite) {
        this.limite = limite;
    }

    public int getNumeroParcelas() {
        return numeroParcelas;
    }

    public void setNumeroParcelas(int numeroParcelas) {
        this.numeroParcelas = numeroParcelas;
    }

    //métodos
    @Override
    public void cadastroCartao() {
        Scanner leitura = new Scanner(System.in);
        System.out.print("Insira o número do cartão: ");
        String numeroCartao = leitura.next();
        int soma = 0;
        try {
            for(int i = 0; i <= numeroCartao.length()-1; i++) {
                String numString = (numeroCartao.substring(i, i+1));
                if (i % 2 == 0) {                            
                    if ((Integer.parseInt(numString) * 2) > 9) {
                        soma += ((Integer.parseInt(numString) * 2) - 9);
                    }
                    else {
                        soma += ((Integer.parseInt(numString) * 2));
                    }
                }
                else {
                    soma += (Integer.parseInt(numString) * 1);
                }
            }
            if (soma % 10 == 0) {
                super.setNumeroCartao(numeroCartao);
            }
            else {
                throw new Exception();
            }
        } catch(Exception CartaoInvalido) {
            System.out.println("Cartão Inválido!");
        }
        

        
        System.out.println("Insira o limite: ");
        this.limite = leitura.nextFloat();
        //System.out.println("Insira o número das parcelas: ");
        leitura.close();
    }

    @Override
    public void imprimeDadosCartao() {
        System.out.println("*** Dados do Cartão de Crédito ***");
        System.out.println("Últimos 4 números: " + super.getNumeroCartao().substring(12));
        System.out.println("Limite: R$ " + this.getLimite());
    }

    @Override
    public void pagamentoCartao() {

    }

    /*public float calculaParcela(){
        return 0;
    }*/
}
